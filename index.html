<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<title>Mathieu Pichette · Scroll Up</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Anton&family=DM+Sans:wght@300;400;600&display=swap');

  * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
  :root { --gold: #F5C842; --dark: #080808; }

  html, body {
    background: var(--dark); color: white;
    font-family: 'DM Sans', sans-serif;
    overflow: hidden; height: 100%; width: 100%;
    position: fixed; top: 0; left: 0;
  }

  #splash {
    position: fixed; inset: 0; background: var(--dark);
    display: flex; flex-direction: column;
    align-items: center; justify-content: center;
    z-index: 1000; gap: 10px; text-align: center; padding: 30px;
  }
  .eyebrow { font-size: 0.68rem; letter-spacing: 4px; text-transform: uppercase; color: #444; margin-bottom: 4px; }
  #splash h1 { font-family: 'Anton', sans-serif; font-size: 5rem; letter-spacing: 3px; line-height: 0.95; }
  #splash h1 em { color: var(--gold); font-style: normal; display: block; font-size: 68%; }

  .scroll-hint {
    display: flex; flex-direction: column; align-items: center; gap: 4px;
    margin: 16px 0; animation: floatUp 2s ease-in-out infinite; color: var(--gold);
  }
  .scroll-hint svg { width: 28px; }
  .scroll-hint span { font-size: 0.62rem; letter-spacing: 4px; text-transform: uppercase; }
  @keyframes floatUp {
    0%,100% { transform: translateY(0); opacity: 0.5; }
    50% { transform: translateY(-7px); opacity: 1; }
  }

  #startBtn {
    background: var(--gold);
    color: var(--dark);
    border: none;
    font-family: 'Anton', sans-serif;
    font-size: 1.2rem;
    letter-spacing: 3px;
    padding: 22px 55px;
    border-radius: 50px;
    cursor: pointer;
    margin-top: 10px;
    touch-action: manipulation;
    -webkit-touch-callout: none;
    user-select: none;
    -webkit-user-select: none;
    display: block;
    position: relative;
    z-index: 9999;
    min-width: 220px;
    min-height: 65px;
  }
  #startBtn:active { background: #d4a820; transform: scale(0.96); }

  #feed { position: fixed; inset: 0; display: none; overflow: hidden; background: #000; }

  .slide {
    position: absolute; inset: 0;
    transition: transform 0.42s cubic-bezier(0.25,0.46,0.45,0.94);
    background: #000; overflow: hidden;
  }
  .slide video {
    position: absolute; top: 0; left: 0;
    width: 100%; height: 100%;
    border: none; z-index: 1;
    object-fit: contain; background: #000;
  }
  .slide-info {
    position: absolute; bottom: 0; left: 0; right: 0;
    padding: 16px 16px 50px;
    background: linear-gradient(transparent, rgba(0,0,0,0.9));
    pointer-events: none; z-index: 2;
  }
  .slide-num { font-size: 0.62rem; letter-spacing: 3px; text-transform: uppercase; color: var(--gold); margin-bottom: 3px; }
  .slide-title { font-size: 0.95rem; font-weight: 600; line-height: 1.3; }

  #topbar {
    position: fixed; top: 0; left: 0; right: 0; z-index: 50;
    display: flex; align-items: center; justify-content: space-between;
    padding: 14px 14px 12px;
    background: linear-gradient(rgba(0,0,0,0.7), transparent);
    pointer-events: none;
  }
  .brand { font-family: 'Anton', sans-serif; font-size: 0.95rem; letter-spacing: 1px; }
  .brand span { color: var(--gold); }
  #counter { font-size: 0.68rem; color: rgba(255,255,255,0.4); letter-spacing: 1px; }

  #scrollBar {
    position: fixed; right: 8px; top: 50%; transform: translateY(-50%);
    display: flex; flex-direction: column; gap: 4px; z-index: 50; pointer-events: none;
  }
  .bdot { width: 3px; height: 18px; border-radius: 10px; background: rgba(255,255,255,0.1); transition: all 0.3s; }
  .bdot.active { background: var(--gold); height: 28px; }

  #hint {
    position: fixed; bottom: 80px; left: 50%; transform: translateX(-50%);
    background: rgba(245,200,66,0.12); border: 1px solid rgba(245,200,66,0.25);
    color: var(--gold); font-size: 0.7rem; letter-spacing: 2px; text-transform: uppercase;
    padding: 8px 18px; border-radius: 20px; z-index: 50; pointer-events: none;
    white-space: nowrap; animation: fadeHint 4s ease forwards;
  }
  @keyframes fadeHint { 0%,60%{opacity:1} 100%{opacity:0} }
</style>
</head>
<body>

<div id="splash">
  <div class="eyebrow">ton espace personnel</div>
  <h1>MATHIEU<br>PICHETTE<em>.co</em></h1>
  <div class="scroll-hint">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="18 15 12 9 6 15"/></svg>
    <span>scroll up</span>
  </div>
  <button id="startBtn">ENTRER →</button>
</div>

<div id="feed">
  <div id="topbar">
    <div class="brand">MP<span>.</span>co</div>
    <div id="counter"></div>
  </div>
  <div id="scrollBar"></div>
</div>

<script>
var VIDEOS = [
  { name: "Madara Uchiha vs Shinobi Alliance Full Fight English Dub", url: "https://ia600807.us.archive.org/33/items/madara-uchiha-vs-shinobi-alliance-full-fight-english-dub-2/Madara%20Uchiha%20vs%20Shinobi%20Alliance%20%20Full%20Fight%20%20English%20Dub%20%282%29.mp4" },
  { name: "Madara vs 5 Kage Full Fight English Dub", url: "https://ia800500.us.archive.org/31/items/madara-vs-5-kage-full-fight-five-kage-vs-madara-uchiha-shinobi-alliance/Madara%20vs%205%20Kage%20FULL%20fight%20%20FIVE%20Kage%20vs%20Madara%20Uchiha%20%20Shinobi%20alliance.mp4" },
  { name: "Naruto vs 3rd Raikage Full Fight English Dub", url: "https://ia600902.us.archive.org/23/items/naruto-vs-3-raikage-full-fight-english-dub/Naruto%20vs%203%20Raikage%20Full%20Fight%20English%20Dub.mp4" },
];

var shuffled = [];
var currentIndex = 0;
var slides = [];
var wheelLock = false;
var touchStartY = 0;
var touchLock = false;
var appStarted = false;

// ─── BOUTON ENTRER ───────────────────────────────────────────
var btn = document.getElementById('startBtn');

// touchstart = réaction immédiate sur Chrome iOS, sans délai 300ms
btn.addEventListener('touchstart', function(e) {
  e.preventDefault();
  e.stopPropagation();
  if (!appStarted) {
    appStarted = true;
    startApp();
  }
}, { passive: false });

// Fallback pour desktop
btn.addEventListener('click', function(e) {
  if (!appStarted) {
    appStarted = true;
    startApp();
  }
});

// ─── FONCTIONS APP ───────────────────────────────────────────
function startApp() {
  document.getElementById('splash').style.display = 'none';
  document.getElementById('feed').style.display = 'block';
  buildFeed();
}

function shuffle(arr) {
  var a = arr.slice();
  for (var i = a.length - 1; i > 0; i--) {
    var j = Math.floor(Math.random() * (i + 1));
    var tmp = a[i]; a[i] = a[j]; a[j] = tmp;
  }
  return a;
}

function buildFeed() {
  var feed = document.getElementById('feed');
  for (var k = 0; k < slides.length; k++) slides[k].remove();
  slides = [];
  shuffled = shuffle(VIDEOS);
  currentIndex = 0;

  for (var i = 0; i < shuffled.length; i++) {
    (function(vid, idx) {
      var slide = document.createElement('div');
      slide.className = 'slide';
      slide.dataset.url = vid.url;

      var video = document.createElement('video');
      video.controls = true;
      video.setAttribute('playsinline', '');
      video.setAttribute('webkit-playsinline', '');
      video.preload = 'none';
      slide.appendChild(video);

      var info = document.createElement('div');
      info.className = 'slide-info';
      info.innerHTML = '<div class="slide-num">VIDÉO ' + (idx+1) + ' / ' + shuffled.length + '</div><div class="slide-title">' + vid.name + '</div>';
      slide.appendChild(info);

      slide.style.transform = 'translateY(' + (idx * 100) + '%)';
      feed.appendChild(slide);
      slides.push(slide);
    })(shuffled[i], i);
  }

  loadSlide(0);
  updateUI();

  var hint = document.createElement('div');
  hint.id = 'hint';
  hint.textContent = '↑ swipe up pour la prochaine vidéo';
  document.body.appendChild(hint);
  setTimeout(function() { if (hint.parentNode) hint.remove(); }, 4200);
}

function loadSlide(idx) {
  var slide = slides[idx];
  if (!slide) return;
  var video = slide.querySelector('video');
  if (!video.src) {
    video.src = slide.dataset.url;
    video.load();
  }
  var p = video.play();
  if (p !== undefined) {
    p.catch(function() {
      // Chrome iOS bloque autoplay — l'user tape play, c'est normal
    });
  }
}

function stopSlide(idx) {
  var slide = slides[idx];
  if (!slide) return;
  var video = slide.querySelector('video');
  if (video) { video.pause(); video.currentTime = 0; }
}

function goTo(idx) {
  if (idx < 0 || idx >= slides.length) return;
  stopSlide(currentIndex);
  currentIndex = idx;
  for (var i = 0; i < slides.length; i++) {
    slides[i].style.transform = 'translateY(' + ((currentIndex - i) * 100) + '%)';
  }
  loadSlide(currentIndex);
  updateUI();
}

function updateUI() {
  document.getElementById('counter').textContent = (currentIndex + 1) + ' / ' + shuffled.length;
  var bar = document.getElementById('scrollBar');
  bar.innerHTML = '';
  var total = Math.min(shuffled.length, 12);
  var rel = Math.round((currentIndex / Math.max(shuffled.length - 1, 1)) * (total - 1));
  for (var i = total - 1; i >= 0; i--) {
    var d = document.createElement('div');
    d.className = 'bdot' + (i === (total - 1 - rel) ? ' active' : '');
    bar.appendChild(d);
  }
}

// ─── SWIPE TOUCH ─────────────────────────────────────────────
document.addEventListener('touchstart', function(e) {
  // Ignorer le tap sur le bouton ENTRER
  if (e.target.id === 'startBtn') return;
  touchStartY = e.touches[0].clientY;
}, { passive: true });

document.addEventListener('touchend', function(e) {
  if (e.target.id === 'startBtn') return;
  if (document.getElementById('feed').style.display === 'none') return;
  if (touchLock) return;
  var diff = touchStartY - e.changedTouches[0].clientY;
  if (diff > 50) {
    touchLock = true;
    setTimeout(function() { touchLock = false; }, 700);
    goTo(currentIndex + 1);
  } else if (diff < -50) {
    touchLock = true;
    setTimeout(function() { touchLock = false; }, 700);
    goTo(currentIndex - 1);
  }
}, { passive: true });

document.addEventListener('touchmove', function(e) {
  if (document.getElementById('feed').style.display !== 'none') {
    e.preventDefault();
  }
}, { passive: false });

// ─── MOLETTE ─────────────────────────────────────────────────
window.addEventListener('wheel', function(e) {
  if (document.getElementById('feed').style.display === 'none') return;
  e.preventDefault();
  if (wheelLock) return;
  wheelLock = true;
  setTimeout(function() { wheelLock = false; }, 700);
  if (e.deltaY > 0) goTo(currentIndex + 1);
  else goTo(currentIndex - 1);
}, { passive: false });

// ─── CLAVIER ─────────────────────────────────────────────────
document.addEventListener('keydown', function(e) {
  if (document.getElementById('feed').style.display === 'none') return;
  if (e.key === 'ArrowUp')   { e.preventDefault(); goTo(currentIndex + 1); }
  if (e.key === 'ArrowDown') { e.preventDefault(); goTo(currentIndex - 1); }
  if (e.key === 'f' || e.key === 'F') {
    if (!document.fullscreenElement) document.documentElement.requestFullscreen().catch(function(){});
    else document.exitFullscreen();
  }
});
</script>
</body>
</html>
