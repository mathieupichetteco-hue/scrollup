<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<title>Mathieu Pichette · Scroll Up</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Anton&family=DM+Sans:wght@300;400;600&display=swap');
  * { margin:0; padding:0; box-sizing:border-box; -webkit-tap-highlight-color:transparent; }
  :root { --gold:#F5C842; --dark:#080808; }

  html, body {
    background:var(--dark); color:white;
    font-family:'DM Sans',sans-serif;
    overflow:hidden; height:100%; width:100%;
    position:fixed; top:0; left:0;
  }

  /* SPLASH */
  #splash {
    position:fixed; inset:0; background:var(--dark);
    display:flex; flex-direction:column;
    align-items:center; justify-content:center;
    z-index:1000; gap:10px; text-align:center; padding:30px;
  }
  .eyebrow { font-size:0.68rem; letter-spacing:4px; text-transform:uppercase; color:#444; margin-bottom:4px; }
  #splash h1 { font-family:'Anton',sans-serif; font-size:5rem; letter-spacing:3px; line-height:0.95; }
  #splash h1 em { color:var(--gold); font-style:normal; display:block; font-size:68%; }
  .scroll-hint {
    display:flex; flex-direction:column; align-items:center; gap:6px;
    margin:16px 0; animation:bob 2s ease-in-out infinite; color:var(--gold);
  }
  .scroll-hint svg { width:28px; }
  .scroll-hint span { font-size:0.62rem; letter-spacing:4px; text-transform:uppercase; }
  @keyframes bob {
    0%,100% { transform:translateY(0); opacity:0.5; }
    50%      { transform:translateY(7px); opacity:1; }
  }
  #startBtn {
    background:var(--gold); color:var(--dark); border:none;
    font-family:'Anton',sans-serif; font-size:1.2rem; letter-spacing:3px;
    padding:22px 55px; border-radius:50px; cursor:pointer; margin-top:10px;
    touch-action:manipulation; user-select:none; -webkit-user-select:none;
    min-width:220px; min-height:65px; position:relative; z-index:9999;
  }
  #startBtn:active { background:#d4a820; transform:scale(0.96); }

  /* FEED */
  #feed { position:fixed; inset:0; display:none; background:#000; overflow:hidden; }

  /*
    MÉCANIQUE :
    - Slide COURANTE  → position 0  (visible, à l'écran)
    - Slide SUIVANTE  → position -100vh (AU-DESSUS, cachée en haut)
    - Slides déjà vues → +100vh, +200vh... (EN DESSOUS, jetées)

    Quand tu swipes vers le BAS :
    → la courante descend (vers +100vh, jetée en bas)
    → la suivante descend aussi (de -100vh vers 0, elle arrive du haut)
    
    Illusion : les vidéos sont empilées AU-DESSUS, tu les tires vers toi.
  */

  .slide {
    position:absolute; left:0; top:0;
    width:100%; height:100%;
    background:#000;
    will-change:transform;
  }

  .slide video {
    width:100%; height:100%;
    object-fit:contain; background:#000;
    display:block;
  }
  .slide-info {
    position:absolute; bottom:0; left:0; right:0;
    padding:16px 16px 50px;
    background:linear-gradient(transparent, rgba(0,0,0,0.9));
    pointer-events:none;
  }
  .slide-num { font-size:0.62rem; letter-spacing:3px; text-transform:uppercase; color:var(--gold); margin-bottom:3px; }
  .slide-title { font-size:0.95rem; font-weight:600; line-height:1.3; }

  #topbar {
    position:fixed; top:0; left:0; right:0; z-index:50;
    display:flex; align-items:center; justify-content:space-between;
    padding:14px 14px 12px;
    background:linear-gradient(rgba(0,0,0,0.65),transparent);
    pointer-events:none;
  }
  .brand { font-family:'Anton',sans-serif; font-size:0.95rem; letter-spacing:1px; }
  .brand span { color:var(--gold); }
  #counter { font-size:0.68rem; color:rgba(255,255,255,0.4); letter-spacing:1px; }

  #hint {
    position:fixed; bottom:80px; left:50%; transform:translateX(-50%);
    background:rgba(245,200,66,0.12); border:1px solid rgba(245,200,66,0.25);
    color:var(--gold); font-size:0.7rem; letter-spacing:2px; text-transform:uppercase;
    padding:8px 18px; border-radius:20px; z-index:50; pointer-events:none;
    white-space:nowrap; animation:fadeHint 4s ease forwards;
  }
  @keyframes fadeHint { 0%,60%{opacity:1} 100%{opacity:0} }
</style>
</head>
<body>

<div id="splash">
  <div class="eyebrow">ton espace personnel</div>
  <h1>MATHIEU<br>PICHETTE<em>.co</em></h1>
  <div class="scroll-hint">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
      <polyline points="6 9 12 15 18 9"/>
    </svg>
    <span>swipe down</span>
  </div>
  <button id="startBtn">ENTRER →</button>
</div>

<div id="feed">
  <div id="topbar">
    <div class="brand">MP<span>.</span>co</div>
    <div id="counter"></div>
  </div>
</div>

<script>
var VIDEOS = [
  { name:"Madara Uchiha vs Shinobi Alliance Full Fight English Dub",
    url:"https://ia600807.us.archive.org/33/items/madara-uchiha-vs-shinobi-alliance-full-fight-english-dub-2/Madara%20Uchiha%20vs%20Shinobi%20Alliance%20%20Full%20Fight%20%20English%20Dub%20%282%29.mp4" },
  { name:"Madara vs 5 Kage Full Fight English Dub",
    url:"https://ia800500.us.archive.org/31/items/madara-vs-5-kage-full-fight-five-kage-vs-madara-uchiha-shinobi-alliance/Madara%20vs%205%20Kage%20FULL%20fight%20%20FIVE%20Kage%20vs%20Madara%20Uchiha%20%20Shinobi%20alliance.mp4" },
  { name:"Naruto vs 3rd Raikage Full Fight English Dub",
    url:"https://ia600902.us.archive.org/23/items/naruto-vs-3-raikage-full-fight-english-dub/Naruto%20vs%203%20Raikage%20Full%20Fight%20English%20Dub.mp4" },
  { name:"Kakashi vs Obito Full Fight English Dub",
    url:"https://ia601604.us.archive.org/19/items/kakashi-vs-obito-full-fight-english-dub/Kakashi%20vs%20Obito%20Full%20Fight%20English%20Dub.mp4" },
  { name:"Itachi and Shisui vs Anbu Full Fight English Dub",
    url:"https://ia600502.us.archive.org/4/items/itachi-and-shisui-vs-anbu-full-fight..-english-dub-naruto-shippuden-./Itachi%20and%20Shisui%20vs%20Anbu%20Full%20Fight..%5BEnglish%20Dub%5D%20%20Naruto%20Shippuden%20..mp4" },
  { name:"Naruto vs Kurama Full Fight English Dub HD",
    url:"https://ia600606.us.archive.org/9/items/naruto-vs-kurama-full-fight-english-dub-hd/Naruto%20vs%20Kurama%20Full%20Fight%20English%20Dub%20HD.mp4" },
];

var list = [];
var current = 0;
var slides = [];
var appStarted = false;
var settling = false;
var dragging = false;
var tStartY = 0;
var feed = document.getElementById('feed');

/* ── Shuffle ── */
function shuffle(arr) {
  var a = arr.slice();
  for (var i=a.length-1; i>0; i--) {
    var j=Math.floor(Math.random()*(i+1));
    var t=a[i]; a[i]=a[j]; a[j]=t;
  }
  return a;
}

/* ── Positionner une slide sans animation ── */
function setPos(el, vh) {
  el.style.transition = 'none';
  el.style.transform  = 'translateY(' + vh + 'vh)';
}

/* ── Positionner une slide AVEC animation ── */
function animateTo(el, vh, cb) {
  el.style.transition = 'transform 0.42s cubic-bezier(0.25,1,0.5,1)';
  el.style.transform  = 'translateY(' + vh + 'vh)';
  if (cb) {
    el.addEventListener('transitionend', function done() {
      el.removeEventListener('transitionend', done);
      cb();
    });
  }
}

/* ── Positionner avec px live (pendant le drag) ── */
function setPosPx(el, px) {
  el.style.transition = 'none';
  el.style.transform  = 'translateY(' + px + 'px)';
}

/* ── Build ── */
function buildFeed() {
  // Vider
  slides.forEach(function(s){ s.remove(); });
  slides = [];
  list = shuffle(VIDEOS);
  current = 0;

  list.forEach(function(vid, idx) {
    var slide = document.createElement('div');
    slide.className = 'slide';

    var video = document.createElement('video');
    video.setAttribute('playsinline','');
    video.setAttribute('webkit-playsinline','');
    video.controls = true;
    video.preload  = 'none';
    video.src      = vid.url;
    slide.appendChild(video);

    var info = document.createElement('div');
    info.className = 'slide-info';
    info.innerHTML =
      '<div class="slide-num">VIDÉO '+(idx+1)+' / '+list.length+'</div>'+
      '<div class="slide-title">'+vid.name+'</div>';
    slide.appendChild(info);

    feed.appendChild(slide);
    slides.push(slide);

    /*
      Position initiale :
      idx 0 → 0vh   (à l'écran, visible)
      idx 1 → -100vh (AU-DESSUS, cachée — prête à être tirée vers le bas)
      idx 2 → -200vh (encore plus haut)
      ...
    */
    setPos(slide, idx === 0 ? 0 : -100 * idx);
  });

  playVideo(0);
  updateCounter();

  var hint = document.createElement('div');
  hint.id = 'hint';
  hint.textContent = '↓ swipe down · prochaine vidéo';
  document.body.appendChild(hint);
  setTimeout(function(){ if(hint.parentNode) hint.remove(); }, 4200);
}

function getVideo(idx) { return slides[idx].querySelector('video'); }

function playVideo(idx) {
  var v = getVideo(idx);
  var p = v.play();
  if (p) p.catch(function(){});
}
function stopVideo(idx) {
  var v = getVideo(idx);
  v.pause(); v.currentTime = 0;
}

function updateCounter() {
  document.getElementById('counter').textContent = (current+1)+' / '+list.length;
}

/* ── Touch ── */
document.addEventListener('touchstart', function(e) {
  if (!appStarted || settling) return;
  if (e.target.closest('#startBtn')) return;
  tStartY  = e.touches[0].clientY;
  dragging = true;
}, { passive: true });

document.addEventListener('touchmove', function(e) {
  if (!dragging || settling) return;
  e.preventDefault();

  var dy = e.touches[0].clientY - tStartY; // positif = doigt descend

  if (dy <= 0) {
    // Swipe vers le haut = interdit, on bloque
    setPos(slides[current], 0);
    if (current < slides.length-1) {
      setPos(slides[current+1], -100 * (slides.length - current - 1) );
      // Remettre la suivante à sa place
      setPos(slides[current+1], -100);
    }
    return;
  }

  if (current >= list.length-1) return; // plus de vidéo suivante

  var H = window.innerHeight;

  // Slide courante : descend avec le doigt
  setPosPx(slides[current], dy);
  // Slide suivante : arrive du haut (commence à -H, suit le doigt)
  setPosPx(slides[current+1], -(H - dy));

}, { passive: false });

document.addEventListener('touchend', function(e) {
  if (!dragging) return;
  dragging = false;
  if (settling) return;

  var dy = e.changedTouches[0].clientY - tStartY;
  var H  = window.innerHeight;

  if (dy > 80 && current < list.length-1) {
    // ✅ Swipe suffisant → compléter la transition
    settling = true;
    var prev = current;
    var next = current + 1;

    stopVideo(prev);
    current = next;
    updateCounter();

    // Slide précédente → finit de partir en bas (+100vh)
    animateTo(slides[prev], 100, null);
    // Slide suivante  → finit d'arriver à 0 depuis le haut
    animateTo(slides[next], 0, function() {
      settling = false;
      playVideo(current);
    });

  } else {
    // ❌ Swipe annulé → tout revient en place
    if (dy > 0 && current < list.length-1) {
      animateTo(slides[current],   0,    null);
      animateTo(slides[current+1], -100, null);
    } else {
      setPos(slides[current], 0);
    }
  }
}, { passive: true });

/* Bloquer scroll natif */
document.addEventListener('touchmove', function(e) {
  if (appStarted) e.preventDefault();
}, { passive: false });

/* ── Bouton ENTRER ── */
var btn = document.getElementById('startBtn');
btn.addEventListener('touchstart', function(e) {
  e.preventDefault(); e.stopPropagation();
  if (!appStarted) { appStarted = true; startApp(); }
}, { passive: false });
btn.addEventListener('click', function() {
  if (!appStarted) { appStarted = true; startApp(); }
});

function startApp() {
  document.getElementById('splash').style.display = 'none';
  feed.style.display = 'block';
  buildFeed();
}
</script>
</body>
</html>
