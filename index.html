<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<title>Mathieu Pichette · Scroll Up</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Anton&family=DM+Sans:wght@300;400;600&display=swap');
  * { margin:0; padding:0; box-sizing:border-box; -webkit-tap-highlight-color:transparent; }
  :root { --gold:#F5C842; --dark:#080808; }

  html, body {
    background:var(--dark); color:white;
    font-family:'DM Sans',sans-serif;
    overflow:hidden; height:100%; width:100%;
    position:fixed; top:0; left:0;
  }

  /* SPLASH */
  #splash {
    position:fixed; inset:0; background:var(--dark);
    display:flex; flex-direction:column;
    align-items:center; justify-content:center;
    z-index:1000; gap:10px; text-align:center; padding:30px;
  }
  .eyebrow { font-size:0.68rem; letter-spacing:4px; text-transform:uppercase; color:#444; margin-bottom:4px; }
  #splash h1 { font-family:'Anton',sans-serif; font-size:5rem; letter-spacing:3px; line-height:0.95; }
  #splash h1 em { color:var(--gold); font-style:normal; display:block; font-size:68%; }
  .scroll-hint {
    display:flex; flex-direction:column; align-items:center; gap:6px;
    margin:16px 0; animation:bob 2s ease-in-out infinite; color:var(--gold);
  }
  .scroll-hint svg { width:28px; }
  .scroll-hint span { font-size:0.62rem; letter-spacing:4px; text-transform:uppercase; }
  @keyframes bob {
    0%,100% { transform:translateY(0); opacity:0.5; }
    50%      { transform:translateY(7px); opacity:1; }
  }
  #startBtn {
    background:var(--gold); color:var(--dark); border:none;
    font-family:'Anton',sans-serif; font-size:1.2rem; letter-spacing:3px;
    padding:22px 55px; border-radius:50px; cursor:pointer; margin-top:10px;
    touch-action:manipulation; user-select:none; -webkit-user-select:none;
    min-width:220px; min-height:65px; position:relative; z-index:9999;
  }
  #startBtn:active { background:#d4a820; transform:scale(0.96); }

  /* FEED */
  #feed { position:fixed; inset:0; display:none; background:#000; overflow:hidden; }

  /* ── SLIDER CONTAINER ── */
  /* 
    Logique identique à TikTok MAIS inversée :
    TikTok  : slides empilées vers le BAS  → swipe UP   pour avancer
    Nous    : slides empilées vers le HAUT → swipe DOWN pour avancer
    
    Concrètement : slide 0 = translateY(0), slide 1 = translateY(-100%), slide 2 = translateY(-200%) ...
    Pour aller à la slide N : on translateY le container de +N*100vh
  */
  #slider {
    position:absolute; inset:0;
    width:100%; height:100%;
    will-change:transform;
  }

  .slide {
    position:absolute; left:0; width:100%; height:100%;
    background:#000;
  }
  .slide video {
    width:100%; height:100%;
    object-fit:contain; background:#000;
    display:block;
  }
  .slide-info {
    position:absolute; bottom:0; left:0; right:0;
    padding:16px 16px 50px;
    background:linear-gradient(transparent, rgba(0,0,0,0.9));
    pointer-events:none;
  }
  .slide-num { font-size:0.62rem; letter-spacing:3px; text-transform:uppercase; color:var(--gold); margin-bottom:3px; }
  .slide-title { font-size:0.95rem; font-weight:600; line-height:1.3; }

  #topbar {
    position:fixed; top:0; left:0; right:0; z-index:50;
    display:flex; align-items:center; justify-content:space-between;
    padding:14px 14px 12px;
    background:linear-gradient(rgba(0,0,0,0.65),transparent);
    pointer-events:none;
  }
  .brand { font-family:'Anton',sans-serif; font-size:0.95rem; letter-spacing:1px; }
  .brand span { color:var(--gold); }
  #counter { font-size:0.68rem; color:rgba(255,255,255,0.4); letter-spacing:1px; }

  #hint {
    position:fixed; bottom:80px; left:50%; transform:translateX(-50%);
    background:rgba(245,200,66,0.12); border:1px solid rgba(245,200,66,0.25);
    color:var(--gold); font-size:0.7rem; letter-spacing:2px; text-transform:uppercase;
    padding:8px 18px; border-radius:20px; z-index:50; pointer-events:none;
    white-space:nowrap; animation:fadeHint 4s ease forwards;
  }
  @keyframes fadeHint { 0%,60%{opacity:1} 100%{opacity:0} }
</style>
</head>
<body>

<div id="splash">
  <div class="eyebrow">ton espace personnel</div>
  <h1>MATHIEU<br>PICHETTE<em>.co</em></h1>
  <div class="scroll-hint">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
      <polyline points="6 9 12 15 18 9"/>
    </svg>
    <span>swipe down</span>
  </div>
  <button id="startBtn">ENTRER →</button>
</div>

<div id="feed">
  <div id="topbar">
    <div class="brand">MP<span>.</span>co</div>
    <div id="counter"></div>
  </div>
  <div id="slider"></div>
</div>

<script>
var VIDEOS = [
  { name: "Madara Uchiha vs Shinobi Alliance Full Fight English Dub",
    url: "https://ia600807.us.archive.org/33/items/madara-uchiha-vs-shinobi-alliance-full-fight-english-dub-2/Madara%20Uchiha%20vs%20Shinobi%20Alliance%20%20Full%20Fight%20%20English%20Dub%20%282%29.mp4" },
  { name: "Madara vs 5 Kage Full Fight English Dub",
    url: "https://ia800500.us.archive.org/31/items/madara-vs-5-kage-full-fight-five-kage-vs-madara-uchiha-shinobi-alliance/Madara%20vs%205%20Kage%20FULL%20fight%20%20FIVE%20Kage%20vs%20Madara%20Uchiha%20%20Shinobi%20alliance.mp4" },
  { name: "Naruto vs 3rd Raikage Full Fight English Dub",
    url: "https://ia600902.us.archive.org/23/items/naruto-vs-3-raikage-full-fight-english-dub/Naruto%20vs%203%20Raikage%20Full%20Fight%20English%20Dub.mp4" },
  { name: "Kakashi vs Obito Full Fight English Dub",
    url: "https://ia601604.us.archive.org/19/items/kakashi-vs-obito-full-fight-english-dub/Kakashi%20vs%20Obito%20Full%20Fight%20English%20Dub.mp4" },
  { name: "Itachi and Shisui vs Anbu Full Fight English Dub",
    url: "https://ia600502.us.archive.org/4/items/itachi-and-shisui-vs-anbu-full-fight..-english-dub-naruto-shippuden-./Itachi%20and%20Shisui%20vs%20Anbu%20Full%20Fight..%5BEnglish%20Dub%5D%20%20Naruto%20Shippuden%20..mp4" },
  { name: "Naruto vs Kurama Full Fight English Dub HD",
    url: "https://ia600606.us.archive.org/9/items/naruto-vs-kurama-full-fight-english-dub-hd/Naruto%20vs%20Kurama%20Full%20Fight%20English%20Dub%20HD.mp4" },
];

var list = [];        // vidéos mélangées
var current = 0;      // index actuel
var appStarted = false;

// Touch state
var tStartY = 0;
var tCurY = 0;
var dragging = false;
var settling = false;  // pendant l'animation finale

var slider = document.getElementById('slider');
var H = window.innerHeight;

/* ── Shuffle ─────────────────────────────── */
function shuffle(arr) {
  var a = arr.slice();
  for (var i = a.length-1; i > 0; i--) {
    var j = Math.floor(Math.random()*(i+1));
    var t = a[i]; a[i]=a[j]; a[j]=t;
  }
  return a;
}

/* ── Position du slider ──────────────────── */
// offset = déplacement en px du container
// slide N est à top: N*100vh dans le container
// pour afficher slide N : container.translateY = -N*100vh + offset_live
function setSlider(px, animate) {
  var base = -current * H;
  var total = base + px;
  if (animate) {
    slider.style.transition = 'transform 0.42s cubic-bezier(0.25,1,0.5,1)';
  } else {
    slider.style.transition = 'none';
  }
  slider.style.transform = 'translateY(' + total + 'px)';
}

/* ── Build feed ──────────────────────────── */
function buildFeed() {
  slider.innerHTML = '';
  list = shuffle(VIDEOS);
  current = 0;

  list.forEach(function(vid, idx) {
    var slide = document.createElement('div');
    slide.className = 'slide';
    // Empiler vers le HAUT : slide 0 en bas, slide 1 au-dessus, etc.
    // top = idx * 100vh  → mais on inverse : slide 0 = top:0, slide 1 = top:-100vh...
    // En fait on les empile NORMALEMENT et on inverse la direction de scroll
    slide.style.top = (idx * 100) + 'vh';

    var video = document.createElement('video');
    video.setAttribute('playsinline','');
    video.setAttribute('webkit-playsinline','');
    video.controls = true;
    video.preload = 'none';
    video.src = vid.url;
    slide.appendChild(video);

    var info = document.createElement('div');
    info.className = 'slide-info';
    info.innerHTML =
      '<div class="slide-num">VIDÉO '+(idx+1)+' / '+list.length+'</div>'+
      '<div class="slide-title">'+vid.name+'</div>';
    slide.appendChild(info);

    slider.appendChild(slide);
  });

  setSlider(0, false);
  playVideo(0);
  updateCounter();

  var hint = document.createElement('div');
  hint.id = 'hint';
  hint.textContent = '↓ swipe down · prochaine vidéo';
  document.body.appendChild(hint);
  setTimeout(function(){ if(hint.parentNode) hint.remove(); }, 4200);
}

function getVideo(idx) {
  return slider.querySelectorAll('.slide')[idx].querySelector('video');
}

function playVideo(idx) {
  var v = getVideo(idx);
  var p = v.play();
  if (p) p.catch(function(){});
}

function stopVideo(idx) {
  var v = getVideo(idx);
  v.pause(); v.currentTime = 0;
}

function updateCounter() {
  document.getElementById('counter').textContent = (current+1)+' / '+list.length;
}

/* ── Touch handlers ──────────────────────── */
document.addEventListener('touchstart', function(e) {
  if (!appStarted) return;
  if (e.target.closest('#startBtn')) return;
  if (settling) return;
  tStartY = e.touches[0].clientY;
  tCurY   = tStartY;
  dragging = true;
  slider.style.transition = 'none'; // live tracking, pas d'animation
}, { passive: true });

document.addEventListener('touchmove', function(e) {
  if (!dragging || settling) return;
  e.preventDefault();
  tCurY = e.touches[0].clientY;
  var dy = tCurY - tStartY; // positif = doigt descend

  // On permet uniquement swipe vers le bas ET seulement s'il y a une prochaine vidéo
  if (dy > 0 && current < list.length - 1) {
    setSlider(dy, false);
  } else if (dy < 0) {
    // Bloquer complètement le swipe vers le haut
    setSlider(0, false);
  }
}, { passive: false });

document.addEventListener('touchend', function(e) {
  if (!dragging) return;
  dragging = false;
  if (settling) return;

  var dy = e.changedTouches[0].clientY - tStartY;

  if (dy > 60 && current < list.length - 1) {
    // Swipe suffisant → vidéo suivante
    settling = true;
    stopVideo(current);
    current++;
    updateCounter();
    setSlider(0, true); // snap à la nouvelle position avec animation
    setTimeout(function() {
      settling = false;
      playVideo(current);
    }, 430);
  } else {
    // Pas assez → revenir en place
    setSlider(0, true);
  }
}, { passive: true });

/* Bloquer scroll natif */
document.addEventListener('touchmove', function(e) {
  if (appStarted) e.preventDefault();
}, { passive: false });

/* ── Bouton ENTRER ───────────────────────── */
var btn = document.getElementById('startBtn');
btn.addEventListener('touchstart', function(e) {
  e.preventDefault(); e.stopPropagation();
  if (!appStarted) { appStarted = true; startApp(); }
}, { passive: false });
btn.addEventListener('click', function() {
  if (!appStarted) { appStarted = true; startApp(); }
});

function startApp() {
  document.getElementById('splash').style.display = 'none';
  document.getElementById('feed').style.display = 'block';
  H = window.innerHeight;
  buildFeed();
}
</script>
</body>
</html>
